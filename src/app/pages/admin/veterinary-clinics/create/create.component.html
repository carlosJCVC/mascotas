<mat-card>
  <h2>
    Registrar Clínica Veterinaria
  </h2>

  <form class="form" fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="clinicForm">

    <div *ngIf="existImage; else nothing;">
      <img mat-card-sm-image class="image_preview" src="{{url}}">
      <br>
    </div>
    <br>
    <ng-template #nothing></ng-template>
    <label>Logo de la Clinica *</label>
    <button mat-raised-button type="button" (click)="openInput()">
      Escoga la imagen para subir
    </button>
    <!-- <input id="fileInput" hidden type="file" (change)="onSelectFile($event)"> -->
    <input id="fileInput" hidden type='file' accept=".jpg, .png" (change)="onSelectFile($event)">
    <div class="progress">
      <mat-progress-bar [value]="uploadPercent|async">
      </mat-progress-bar>
    </div>
    <input #imageClinic type="hidden" [value]="urlClinic|async">
    <mat-form-field hintLabel="Max 50 caracteres">
        <input #inputName formControlName="Nombre" matInput placeholder="Nombre Clínica" maxlength="50" required>
      <mat-hint align="end">{{inputName.value?.length || 0}}/50</mat-hint>
      <mat-error>Este campo es requerido.</mat-error>
    </mat-form-field>

    <mat-form-field hintLabel="Max 50 caracteres">
      <input formControlName="Direccion" #inputDireccion matInput placeholder="Direccion Clínica" maxlength="50" required>
      <mat-hint align="end">{{inputDireccion.value?.length || 0}}/50</mat-hint>
      <mat-error>Este campo es requerido.</mat-error>
    </mat-form-field>

    <mat-form-field hintLabel="Max 10 caracteres">
      <input #inputTelefono type="number" formControlName="Telefono" matInput placeholder="Telefono" [errorStateMatcher]="matcher" required>
      <mat-error *ngIf="inputTelefono.value?.length >= 10">El telefono no puede exceder de 10 digitos.</mat-error>
      <mat-error *ngIf="inputTelefono.value?.length <= 6">El telefono no puede ser menor a 6 digitos.</mat-error>
    </mat-form-field>

    <mat-form-field hintLabel="Max 250 caracteres">
      <textarea formControlName="Especialidades" #inputEspecialidades matInput placeholder="Especialidades" maxlength="250" required></textarea>
      <mat-hint align="end">{{inputEspecialidades.value?.length || 0}}/250</mat-hint>
      <mat-error>Este campo es requerido.</mat-error>
    </mat-form-field>

    <mat-form-field>
      <input formControlName="Horario" matInput class="input" placeholder="Horario" required>
      <mat-error>Este campo es requerido.</mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="Dias de Atencion" [formControl]="days" multiple>
        <mat-select-trigger>
          {{days.value ? days.value[0] : ''}}
          <span *ngIf="days.value?.length > 1" class="additional-selection">
        (+{{days.value.length - 1}} {{days.value?.length === 2 ? 'dia' : 'dias'}})
      </span>
        </mat-select-trigger>
        <mat-option *ngFor="let day of daysList" [value]="day">{{day}}</mat-option>
      </mat-select>
      <mat-error>Este campo es requerido.</mat-error>
    </mat-form-field>

    <button mat-raised-button color="primary" [disabled]="!clinicForm.valid || !existImage" (click)="onSubmit()">Enviar</button>
    <br>
    <button mat-raised-button color="" (click)="onCancel()">Cancelar</button>
  </form>
</mat-card>
